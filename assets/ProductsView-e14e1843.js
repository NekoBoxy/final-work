import{C as x,a as w}from"./CFooter-0e83eb3a.js";import{_ as f,o as c,a as l,e as t,n as _,F as g,f as C,t as m,m as $,r as u,b as r,w as h,g as y}from"./index-141f6975.js";import{a as v}from"./axios-bff3f665.js";import{u as N}from"./cart-e6b08a26.js";const F={props:["total_pages","on_page"],data(){return{currentPage:1}},methods:{handlePrePage(){this.currentPage=this.currentPage-1,this.$emit("on_page",this.currentPage)},handleCurrentPage(o){this.currentPage=o,this.$emit("on_page",this.currentPage)},handleNextPage(){this.currentPage=this.currentPage+1,this.$emit("on_page",this.currentPage)}},computed:{pages(){return parseInt(this.total_pages,10)}}},V={"aria-label":"Page navigation"},B={class:"pagination justify-content-center"},L=["onClick"];function j(o,e,p,P,n,s){return c(),l("nav",V,[t("ul",B,[t("li",{class:_({"page-item":!0,disabled:n.currentPage==1})},[t("a",{class:"page-link",style:{cursor:"pointer"},onClick:e[0]||(e[0]=i=>s.handlePrePage())}," 上一頁 ")],2),(c(!0),l(g,null,C(p.total_pages,(i,d)=>(c(),l("li",{class:_(["pagination-pc",{"page-item":!0,active:n.currentPage==i}]),key:d},[t("a",{class:"page-link",style:{cursor:"pointer"},onClick:b=>s.handleCurrentPage(i)},m(i),9,L)],2))),128)),t("li",{class:_({"page-item":!0,disabled:n.currentPage==p.total_pages})},[t("a",{class:"page-link",style:{cursor:"pointer"},onClick:e[1]||(e[1]=i=>s.handleNextPage())}," 下一頁 ")],2)])])}const q=f(F,[["render",j],["__scopeId","data-v-f45b63ba"]]),I={props:[],components:{CNavbar:x,CFooter:w,CPagination:q},data(){return{category:"",products:{},pagination:{total_pages:1,current_page:1,has_pre:!1,has_next:!1,category:""}}},methods:{...$(N,["updateNum"]),async getProducts(o){const e=await v({method:"get",url:"https://vue3-course-api.hexschool.io/v2/api/catboxy/products",params:{page:o||this.pagination.current_page,category:this.category}});this.products=e.data.products,this.pagination=e.data.pagination},handleCategory(o){this.category=o,o?this.$router.push({path:"/products",query:{category:o}}):this.$router.push({path:"/products"}),this.getProducts()},async addCart(o,e=1){await v({method:"post",url:"https://vue3-course-api.hexschool.io/v2/api/catboxy/cart",data:{data:{product_id:o,qty:e}}}),await this.updateNum()}},async mounted(){this.category=this.$route.query.category,this.getProducts()}},O={class:"container"},R={class:"row"},S={class:"col"},z={"aria-label":"breadcrumb"},A={class:"breadcrumb"},D={class:"breadcrumb-item"},E={class:"breadcrumb-item"},T={class:"breadcrumb-item active","aria-current":"page"},U={class:"row"},G={class:"col-12 col-md-2 d-flex flex-column"},H=t("input",{type:"radio",class:"btn-check",name:"options-outlined",id:"outlined1",autocomplete:"off",checked:""},null,-1),J=t("input",{type:"radio",class:"btn-check",name:"options-outlined",id:"outlined2",autocomplete:"off"},null,-1),K=t("input",{type:"radio",class:"btn-check",name:"options-outlined",id:"outlined3",autocomplete:"off"},null,-1),M=t("input",{type:"radio",class:"btn-check",name:"options-outlined",id:"outlined4",autocomplete:"off"},null,-1),Q={class:"col-12 col-md-10"},W={class:"row"},X={class:"col pb-3"},Y={class:"row"},Z={class:"card mb-3"},tt=["src"],et={class:"card-body"},ot=["title"],st=["onClick"],at={class:"row"},nt={class:"col"};function it(o,e,p,P,n,s){const i=u("CNavbar"),d=u("RouterLink"),b=u("CPagination"),k=u("CFooter");return c(),l(g,null,[r(i),t("div",O,[t("div",R,[t("div",S,[t("nav",z,[t("ol",A,[t("li",D,[r(d,{to:"/"},{default:h(()=>[y("首頁")]),_:1})]),t("li",E,[r(d,{to:"/products"},{default:h(()=>[y("產品一覽")]),_:1})]),t("li",T,m(n.category||"全部"),1)])])])]),t("div",U,[t("div",G,[H,t("label",{class:"btn btn-outline-primary mb-2",style:{"min-width":"110px"},for:"outlined1",onClick:e[0]||(e[0]=a=>s.handleCategory(""))},"全部"),J,t("label",{class:"btn btn-outline-primary mb-2",style:{"min-width":"110px"},for:"outlined2",onClick:e[1]||(e[1]=a=>s.handleCategory("盆栽"))},"盆栽"),K,t("label",{class:"btn btn-outline-primary mb-2",style:{"min-width":"110px"},for:"outlined3",onClick:e[2]||(e[2]=a=>s.handleCategory("盆花"))},"盆花"),M,t("label",{class:"btn btn-outline-primary mb-2",style:{"min-width":"110px"},for:"outlined4",onClick:e[3]||(e[3]=a=>s.handleCategory("花束"))},"花束")]),t("div",Q,[t("div",W,[t("div",X,[t("div",Y,[(c(!0),l(g,null,C(n.products,a=>(c(),l("div",{class:"col-sm-12 col-md-4",key:a.id},[t("div",Z,[r(d,{to:{path:`/product/${a.id}`}},{default:h(()=>[t("img",{src:a.imageUrl,class:"img-fluid card-img-top boxy",style:{"object-fit":"cover",height:"300px"},alt:"..."},null,8,tt)]),_:2},1032,["to"]),t("div",et,[t("h5",{class:"card-title text-truncate",title:a.title},m(a.title),9,ot),t("button",{type:"button",class:"btn btn-outline-primary",onClick:rt=>s.addCart(a.id)},"加入購物車",8,st)])])]))),128))])])]),t("div",at,[t("div",nt,[r(b,{total_pages:n.pagination.total_pages,onOn_page:s.getProducts},null,8,["total_pages","onOn_page"])])])])])]),r(k)],64)}const pt=f(I,[["render",it]]);export{pt as default};
