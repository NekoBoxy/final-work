import{C as x,a as L}from"./CFooter-9e29e696.js";import{C as P}from"./CPagination-f4227e32.js";import{a as m}from"./axios-bff3f665.js";import{_ as $,m as b,r as n,o as d,a as u,b as t,e as i,w as g,t as r,F as y,f as N,u as S,i as f,k as v,p as F,h as I}from"./index-200fe07f.js";import{u as V}from"./cart-f94a13e7.js";const j={components:{CNavbar:x,CFooter:L,CPagination:P},data(){return{category:"",products:{},pagination:{total_pages:1,current_page:1,has_pre:!1,has_next:!1,category:""}}},methods:{...b(V,["updateNum"]),...b(S,["setLoader"]),async handleProductClick(s){await this.$router.push(`/product/${s.id}`),await this.$router.go()},async getProducts(s){try{this.setLoader(!0);const e=await m({method:"get",url:"https://vue3-course-api.hexschool.io/v2/api/catboxy/products",params:{page:s||this.pagination.current_page,category:this.category}});this.products=e.data.products,this.pagination=e.data.pagination,this.setLoader(!1)}catch(e){alert(e.response.data.message)}},async handleCategory(s){try{this.setLoader(!0),this.category=s,s?this.$router.push({path:"/products",query:{category:s}}):this.$router.push({path:"/products"}),await this.getProducts(),this.setLoader(!1)}catch(e){alert(e.response.data.message)}},async addCart(s,e=1){try{this.setLoader(!0),await m({method:"post",url:"https://vue3-course-api.hexschool.io/v2/api/catboxy/cart",data:{data:{product_id:s,qty:e}}}),await this.updateNum(),this.setLoader(!1)}catch(p){alert(p.response.data.message)}}},async mounted(){this.setLoader(!0),this.category=this.$route.query.category,await this.getProducts(),this.setLoader(!1)}},c=s=>(F("data-v-e2b9032f"),s=s(),I(),s),z={class:"wrapper"},B={class:"container"},q={class:"row"},A={class:"col"},O={"aria-label":"breadcrumb"},R={class:"breadcrumb"},D={class:"breadcrumb-item"},E={class:"breadcrumb-item"},M={class:"breadcrumb-item active","aria-current":"page"},T={class:"row"},U={class:"col-12 col-md-2 d-flex flex-column"},G=c(()=>t("input",{type:"radio",class:"btn-check",name:"options-outlined",id:"outlined1",autocomplete:"off",checked:""},null,-1)),H=c(()=>t("input",{type:"radio",class:"btn-check",name:"options-outlined",id:"outlined2",autocomplete:"off"},null,-1)),J=c(()=>t("input",{type:"radio",class:"btn-check",name:"options-outlined",id:"outlined3",autocomplete:"off"},null,-1)),K=c(()=>t("input",{type:"radio",class:"btn-check",name:"options-outlined",id:"outlined4",autocomplete:"off"},null,-1)),Q={class:"col-12 col-md-10"},W={class:"row"},X={class:"col pb-3"},Y={class:"row"},Z=["onClick"],tt=["src"],et={class:"card-body"},st={class:"row"},ot={class:"col-12"},at=["title"],it={class:"col-6 d-flex align-items-center"},ct={class:"d-flex flex-column align-items-left"},nt={class:"product-pc"},rt={style:{"font-size":"0.75rem",color:"#123025A8"}},lt={style:{"font-size":"1rem"}},dt={class:"product-mobile col-6 justify-content-center p-1"},ut=["onClick"],pt=c(()=>t("i",{class:"bi bi-cart-plus"},null,-1)),_t=[pt],ht={class:"product-pc col-6 justify-content-center p-1"},mt=["onClick"],bt={class:"row"},gt={class:"col"};function yt(s,e,p,ft,l,a){const C=n("CNavbar"),_=n("RouterLink"),w=n("CPagination"),k=n("CFooter");return d(),u(y,null,[t("div",z,[i(C),t("div",B,[t("div",q,[t("div",A,[t("nav",O,[t("ol",R,[t("li",D,[i(_,{to:"/"},{default:g(()=>[f("首頁")]),_:1})]),t("li",E,[i(_,{to:"/products"},{default:g(()=>[f("產品一覽")]),_:1})]),t("li",M,r(l.category||"全部"),1)])])])]),t("div",T,[t("div",U,[G,t("label",{class:"btn btn-outline-primary mb-2",style:{"min-width":"110px"},for:"outlined1",onClick:e[0]||(e[0]=o=>a.handleCategory(""))},"全部"),H,t("label",{class:"btn btn-outline-primary mb-2",style:{"min-width":"110px"},for:"outlined2",onClick:e[1]||(e[1]=o=>a.handleCategory("盆栽"))},"盆栽"),J,t("label",{class:"btn btn-outline-primary mb-2",style:{"min-width":"110px"},for:"outlined3",onClick:e[2]||(e[2]=o=>a.handleCategory("盆花"))},"盆花"),K,t("label",{class:"btn btn-outline-primary mb-2",style:{"min-width":"110px"},for:"outlined4",onClick:e[3]||(e[3]=o=>a.handleCategory("花束"))},"花束")]),t("div",Q,[t("div",W,[t("div",X,[t("div",Y,[(d(!0),u(y,null,N(l.products,o=>(d(),u("div",{class:"col-sm-12 col-md-6 col-lg-4",key:o.id},[t("div",{class:"card mb-3 card-shadow",onClick:h=>a.handleProductClick(o),style:{cursor:"pointer"}},[t("img",{src:o.imageUrl,class:"img-fluid card-img-top",style:{"object-fit":"cover",height:"300px"},alt:"productImg"},null,8,tt),t("div",et,[t("div",st,[t("div",ot,[t("span",{class:"card-title text-truncate",title:o.title,style:{"font-size":"1.5rem"}},r(o.title),9,at)]),t("div",it,[t("div",ct,[t("div",nt,[t("del",rt,r(o.origin_price),1)]),t("div",null,[t("span",lt,r(o.price+" 元"),1)])])]),t("div",dt,[t("button",{type:"button",class:"btn btn-outline-primary",onClick:v(h=>a.addCart(o.id),["stop"])},_t,8,ut)]),t("div",ht,[t("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:v(h=>a.addCart(o.id),["stop"])}," 加入購物車 ",8,mt)])])])],8,Z)]))),128))])])]),t("div",bt,[t("div",gt,[i(w,{total_pages:l.pagination.total_pages,onOn_page:a.getProducts},null,8,["total_pages","onOn_page"])])])])])])]),i(k)],64)}const Lt=$(j,[["render",yt],["__scopeId","data-v-e2b9032f"]]);export{Lt as default};
