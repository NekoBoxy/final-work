import{C as x,a as w}from"./CFooter-ca468329.js";import{C as k}from"./CPagination-efef9ab3.js";import{a as h}from"./axios-bff3f665.js";import{_ as L,m,r,o as l,a as u,b as t,e as i,w as p,t as b,F as g,f as P,u as N,i as y,p as $,h as S}from"./index-c607938f.js";import{u as F}from"./cart-7307de5f.js";const I={components:{CNavbar:x,CFooter:w,CPagination:k},data(){return{category:"",products:{},pagination:{total_pages:1,current_page:1,has_pre:!1,has_next:!1,category:""}}},methods:{...m(F,["updateNum"]),...m(N,["setLoader"]),async getProducts(o){try{this.setLoader(!0);const e=await h({method:"get",url:"https://vue3-course-api.hexschool.io/v2/api/catboxy/products",params:{page:o||this.pagination.current_page,category:this.category}});this.products=e.data.products,this.pagination=e.data.pagination,this.setLoader(!1)}catch(e){alert(e.response.data.message)}},async handleCategory(o){try{this.setLoader(!0),this.category=o,o?this.$router.push({path:"/products",query:{category:o}}):this.$router.push({path:"/products"}),await this.getProducts(),this.setLoader(!1)}catch(e){alert(e.response.data.message)}},async addCart(o,e=1){try{this.setLoader(!0),await h({method:"post",url:"https://vue3-course-api.hexschool.io/v2/api/catboxy/cart",data:{data:{product_id:o,qty:e}}}),await this.updateNum(),this.setLoader(!1)}catch(_){alert(_.response.data.message)}}},async mounted(){this.setLoader(!0),this.category=this.$route.query.category,await this.getProducts(),this.setLoader(!1)}},n=o=>($("data-v-2b7e9db4"),o=o(),S(),o),V={class:"wrapper"},B={class:"container"},q={class:"row"},O={class:"col"},R={"aria-label":"breadcrumb"},j={class:"breadcrumb"},A={class:"breadcrumb-item"},D={class:"breadcrumb-item"},E={class:"breadcrumb-item active","aria-current":"page"},T={class:"row"},U={class:"col-12 col-md-2 d-flex flex-column"},z=n(()=>t("input",{type:"radio",class:"btn-check",name:"options-outlined",id:"outlined1",autocomplete:"off",checked:""},null,-1)),G=n(()=>t("input",{type:"radio",class:"btn-check",name:"options-outlined",id:"outlined2",autocomplete:"off"},null,-1)),H=n(()=>t("input",{type:"radio",class:"btn-check",name:"options-outlined",id:"outlined3",autocomplete:"off"},null,-1)),J=n(()=>t("input",{type:"radio",class:"btn-check",name:"options-outlined",id:"outlined4",autocomplete:"off"},null,-1)),K={class:"col-12 col-md-10"},M={class:"row"},Q={class:"col pb-3"},W={class:"row"},X={class:"card mb-3"},Y=["src"],Z={class:"card-body"},tt=["title"],et=["onClick"],ot={class:"row"},st={class:"col"};function at(o,e,_,it,c,a){const f=r("CNavbar"),d=r("RouterLink"),v=r("CPagination"),C=r("CFooter");return l(),u(g,null,[t("div",V,[i(f),t("div",B,[t("div",q,[t("div",O,[t("nav",R,[t("ol",j,[t("li",A,[i(d,{to:"/"},{default:p(()=>[y("首頁")]),_:1})]),t("li",D,[i(d,{to:"/products"},{default:p(()=>[y("產品一覽")]),_:1})]),t("li",E,b(c.category||"全部"),1)])])])]),t("div",T,[t("div",U,[z,t("label",{class:"btn btn-outline-primary mb-2",style:{"min-width":"110px"},for:"outlined1",onClick:e[0]||(e[0]=s=>a.handleCategory(""))},"全部"),G,t("label",{class:"btn btn-outline-primary mb-2",style:{"min-width":"110px"},for:"outlined2",onClick:e[1]||(e[1]=s=>a.handleCategory("盆栽"))},"盆栽"),H,t("label",{class:"btn btn-outline-primary mb-2",style:{"min-width":"110px"},for:"outlined3",onClick:e[2]||(e[2]=s=>a.handleCategory("盆花"))},"盆花"),J,t("label",{class:"btn btn-outline-primary mb-2",style:{"min-width":"110px"},for:"outlined4",onClick:e[3]||(e[3]=s=>a.handleCategory("花束"))},"花束")]),t("div",K,[t("div",M,[t("div",Q,[t("div",W,[(l(!0),u(g,null,P(c.products,s=>(l(),u("div",{class:"col-sm-12 col-md-6 col-lg-4",key:s.id},[t("div",X,[i(d,{to:{path:`/product/${s.id}`}},{default:p(()=>[t("img",{src:s.imageUrl,class:"img-fluid card-img-top boxy",style:{"object-fit":"cover",height:"300px"},alt:"productImg"},null,8,Y)]),_:2},1032,["to"]),t("div",Z,[t("h5",{class:"card-title text-truncate",title:s.title},b(s.title),9,tt),t("button",{type:"button",class:"btn btn-outline-primary",onClick:rt=>a.addCart(s.id)},"加入購物車",8,et)])])]))),128))])])]),t("div",ot,[t("div",st,[i(v,{total_pages:c.pagination.total_pages,onOn_page:a.getProducts},null,8,["total_pages","onOn_page"])])])])])])]),i(C)],64)}const pt=L(I,[["render",at],["__scopeId","data-v-2b7e9db4"]]);export{pt as default};
